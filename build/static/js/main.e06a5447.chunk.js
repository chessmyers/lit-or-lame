(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){},33:function(e,t,a){},39:function(e,t){},40:function(e,t,a){e.exports=a(65)},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},56:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(34),s=a.n(r),i=(a(45),a(3)),c=a(5),l=a(7),u=a(6),m=a(9),h=a(8),p=a(4),d=a(18),f=(a(46),a(47),"/"),g=function(e){return o.a.createElement("nav",{className:"navBar"},o.a.createElement(p.b,{to:f},o.a.createElement("button",{className:"headerButton",onClick:function(){return e.changeCat("tastyorterrible")}},"TastyorTerrible")),o.a.createElement(p.b,{to:f},o.a.createElement("button",{className:"headerButton",onClick:function(){return e.changeCat("flyorfail")}},"FlyorFail")),o.a.createElement(p.b,{to:f},o.a.createElement("button",{className:"headerButton",onClick:function(){return e.changeCat("litorlame")}},"LitorLame")),o.a.createElement(p.b,{to:f},o.a.createElement("button",{className:"headerButton",onClick:function(){return e.changeCat("funnyorflat")}},"FunnyorFlat")),o.a.createElement(p.b,{to:f},o.a.createElement("button",{className:"headerButton",onClick:function(){return e.changeCat("weirdorwonderful")}},"WeirdorWonderful")))},b=(a(56),a(22)),v=a.n(b),E=o.a.createContext(null),y=function(e){return function(t){return o.a.createElement(E.Consumer,null,function(a){return o.a.createElement(e,Object.assign({},t,{firebase:a}))})}},w=E,C=a(11),O=a(15),j=a.n(O),k=(a(58),a(60),a(66),{apiKey:"AIzaSyBaSBuT0ldABrBnjbuBz7XN7iM8vawNPQ4",authDomain:"lit-or-wack.firebaseapp.com",databaseURL:"https://lit-or-wack.firebaseio.com",projectId:"lit-or-wack",storageBucket:"lit-or-wack.appspot.com",messagingSenderId:"669480599660",appId:"1:669480599660:web:c0345becf6bea2b7"}),N=function e(){var t=this;Object(i.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth().currentUser.updatePassword(e)},this.user=function(e){return t.db.collection("users").doc(e)},this.users=function(){return t.db.collection("users")},this.userID=function(){return t.auth.currentUser.uid},this.getCurrentUsername=function(){return t.users().doc(t.userID()).get()},this.loadPosts=function(e){return t.db.collection("posts").where("category","==",e).orderBy("time","desc").get()},this.loadMyPosts=function(){return t.db.collection("posts").where("poster","==",t.auth.currentUser.uid).orderBy("time","desc").get()},this.newPost=function(e,a,n){return t.db.collection("posts").add({text:a,time:j.a.firestore.FieldValue.serverTimestamp(),poster:t.auth.currentUser.uid,yes:0,no:0,category:e,image:n})},this.likePost=function(e,a){var n;return t.db.collection("posts").doc(e).update((n={},Object(C.a)(n,a,j.a.firestore.FieldValue.increment(1)),Object(C.a)(n,"voters",j.a.firestore.FieldValue.arrayUnion(t.auth.currentUser.uid)),n))},this.loadComments=function(e){return t.db.collection("posts").doc(e).collection("comments").orderBy("time","asc").get()},this.makeNewComment=function(e,a){return t.db.collection("posts").doc(a).collection("comments").add({no:0,poster:t.auth.currentUser.uid,text:e,time:j.a.firestore.FieldValue.serverTimestamp(),yes:0})},this.getCommentPoster=function(e){return t.db.collection("users").doc(e).get()},this.uploadPostImg=function(e){return t.storage.ref().child("postImgs/".concat(e.name)).put(e)},this.getUploadURL=function(e){return t.storage.ref().child("postImgs/".concat(e.name)).getDownloadURL()},this.currentTime=function(){return j.a.firestore.FieldValue.serverTimestamp()},j.a.initializeApp(k),this.auth=j.a.auth(),this.db=j.a.firestore(),this.storage=j.a.storage()},S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={comments:[],showComments:!1,showVotesBar:!1,yesPercent:50,noPercent:50,yes:0,no:0},a.toggleComments=a.toggleComments.bind(Object(m.a)(a)),a.loadComments=a.loadComments.bind(Object(m.a)(a)),a.goToSignIn=a.goToSignIn.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(this.props.authUser&&this.props.voters&&-1!==this.props.voters.indexOf(this.props.firebase.userID())){var e=Math.ceil(this.props.yes/(this.props.yes+this.props.no)*100);this.setState({showVotesBar:!0,yesPercent:e,noPercent:100-e,yes:this.props.yes,no:this.props.no})}}},{key:"toggleComments",value:function(){this.setState(function(e){return{showComments:!e.showComments}})}},{key:"loadComments",value:function(){var e=this,t=[];this.props.firebase.loadComments(this.props.id).then(function(e){e.forEach(function(e){var a=e.data();a.id=e.id,t.push(a)})}).then(function(){e.setState({showComments:!0,comments:t})}).catch(function(e){console.log(e)})}},{key:"clickPost",value:function(e){var t=this;if(this.props.authUser){var a=e?"yes":"no",n=this.props.yes+(e?1:0),o=this.props.no+(e?0:1),r=Math.ceil(n/(n+o)*100);this.props.firebase.likePost(this.props.id,a).then(function(a){t.setState({showVotesBar:!0,yesPercent:r,noPercent:100-r,yes:t.props.yes+(e?1:0),no:t.props.no+(e?0:1)})}).catch(function(e){console.log(e)})}else this.goToSignIn()}},{key:"goToSignIn",value:function(){this.props.history.push("/signin")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"postContent"},o.a.createElement("div",{className:"Post"},this.props.image&&""!==this.props.image&&o.a.createElement("div",{className:"postImageContainer"},o.a.createElement("img",{src:this.props.image,alt:this.props.image,className:"postImage"})),o.a.createElement("div",{className:"postText"},this.props.text),this.state.showVotesBar?o.a.createElement("div",{className:"postButtonsBox"},o.a.createElement("div",{className:"votingBar"},o.a.createElement("span",{className:"colBar greenBar",style:{width:this.state.yesPercent.toString(10)+"%"}},o.a.createElement("div",{style:{paddingBottom:"5px"}},this.state.yes)),o.a.createElement("span",{className:"colBar redBar",style:{width:this.state.noPercent.toString(10)+"%"}},this.state.no))):o.a.createElement("div",{className:"postButtonsBox"},o.a.createElement("input",{type:"image",src:"yee.png",alt:"Lit",width:"10%",height:"10%",className:"clickOpacity",onClick:function(){return e.clickPost(!0)}}),o.a.createElement("span",{style:{flexBasis:"100px",textAlign:"center",color:"darkgray"}},"   or   "),o.a.createElement("input",{type:"image",src:"nah.png",alt:"Lame",width:"10%",height:"10%",className:"clickOpacity",onClick:function(){return e.clickPost(!1)}})),o.a.createElement(x,{firebase:this.props.firebase,poster:this.props.poster,classN:"postPoster"}),o.a.createElement("div",{className:"time"},t.ago(this.props.time)," ago")),o.a.createElement("div",{className:"commentsBox"},this.state.showComments?o.a.createElement(P,{comments:this.state.comments,postID:this.props.id,firebase:this.props.firebase,toggleComm:this.toggleComments,reloadComments:this.loadComments,authUser:this.props.authUser,goToSignIn:this.goToSignIn}):o.a.createElement("div",{className:"showCommentsButton",onClick:this.loadComments},"Show Comments")))}}],[{key:"ago",value:function(e){var t=v()(e.toDate()).diff(v()());return v.a.duration(t).humanize()}}]),t}(n.Component);S.defaultProps={text:"",id:"",yes:0,no:0,time:new Date,category:"",poster:"",voters:[],authUser:null};var P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.setState({commentText:e.target.value})},a.onPostComment=function(e){e.preventDefault();var t=a.state.commentText;a.props.authUser?a.props.firebase.makeNewComment(t,a.props.postID).then(function(e){console.log(e),a.setState({commentText:""})}).then(function(){a.props.reloadComments()}).catch(function(e){console.log(e)}):a.props.goToSignIn()},a.state={commentText:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.commentText,a=""===t;return o.a.createElement("div",null,o.a.createElement("div",{className:"comments"},this.props.comments.map(function(t){return o.a.createElement("div",{className:"comment",key:t.id},o.a.createElement("span",null,t.text),o.a.createElement(x,{firebase:e.props.firebase,poster:t.poster,classN:"commentPoster"}),o.a.createElement("div",{className:"commentTime"},S.ago(t.time)," ago"))})),o.a.createElement("form",{onSubmit:this.onPostComment,className:"newCommentForm"},o.a.createElement("input",{name:"username",className:"newCommentBox",value:t,onChange:this.onChange,type:"text",placeholder:"new comment..."}),o.a.createElement("button",{disabled:a,type:"submit",className:"newCommentButton"},"send")),o.a.createElement("div",{className:"hideCommentsButton",onClick:function(){return e.props.toggleComm()}},"Hide Comments"))}}]),t}(n.Component);P.defaultProps={comments:[],postID:"",firebase:null,toggleComm:function(){},reloadComments:function(){},authUser:null,goToSignIn:function(){}};var x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.getCommentPoster(this.props.poster).then(function(t){var a=t.data().username;e.setState({username:a})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.state.username;return o.a.createElement("div",{className:this.props.classN},"Posted by ",e)}}]),t}(n.Component);x.defaultProps={poster:"",firebase:null,classN:""};var B=Object(d.e)(y(S)),U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={posts:[]},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){var e=this,t=0===this.props.posts.length?o.a.createElement("div",{className:"loading"},"Loading..."):this.props.posts.map(function(t){return o.a.createElement(B,Object.assign({},t,{key:t.id,authUser:e.props.authUser}))}),a="";switch(this.props.category){case"tastyorterrible":a="Post your best food ideas and/or pictures we'll vote on whether we'd indulge or take a pass!";break;case"flyorfail":a="Post your new/best outfit, and we'll vote on whether you'll be turning heads, for better or worse!";break;case"litorlame":a="Post anything you want here and we'll vote on the fundamental question: is it lit, or is it lame?";break;case"funnyorflat":a="Post your most humorous joke or situation and we'll vote on whether its funny or just falls flat";break;case"weirdorwonderful":a="Post your craziest idea here and we'll vote on whether its the next big thing or just plain odd";break;default:a=""}return o.a.createElement("div",null,o.a.createElement("h1",{className:"feedTitle"},"#",this.props.category),o.a.createElement("div",{className:"postsContainer"},o.a.createElement("p",{className:"description"},a),t))}}]),t}(n.Component);U.defaultProps={onLoad:function(){},posts:[],category:"",authUser:null};var I=U,T=a(12),D=a(16),L=(a(20),{email:"",error:null}),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=a.state.email;a.props.firebase.doPasswordReset(t).then(function(){a.setState(Object(T.a)({},L))}).catch(function(e){a.setState({error:e})})},a.onChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.state=Object(T.a)({},L),a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return o.a.createElement("div",{className:"modalContainer"},o.a.createElement("form",{onSubmit:this.onSubmit,className:"modal"},o.a.createElement("h1",{className:"modalTitle"},"Password Forget"),o.a.createElement("input",{name:"email",className:"formInput",value:this.state.email,onChange:this.onChange,type:"text",placeholder:"Email Address"}),a&&o.a.createElement("div",{className:"errorMessage"},a.message),o.a.createElement("button",{disabled:n,type:"submit",className:"submitButton"},"Reset My Password")),o.a.createElement(p.b,{to:"/signin",style:{textDecoration:"none",margin:"5px"}},o.a.createElement("span",{role:"img","aria-label":"back",className:"goBack"},"\u2b05\ufe0f go back")))}}]),t}(n.Component),M=function(){return o.a.createElement("p",null,"forgot password? ",o.a.createElement(p.b,{to:"/pw-forget"},"reset it here"))},F=function(){return o.a.createElement("div",null,o.a.createElement(W,null))},W=y(A),R={email:"",password:"",error:null},V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,o=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,o).then(function(){a.setState(Object(T.a)({},R)),a.props.history.push(f)}).catch(function(e){a.setState({error:e})})},a.onChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.state=Object(T.a)({},R),a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,r=""===a||""===t||a.length<6;return o.a.createElement("div",{className:"modalContainer"},o.a.createElement("form",{onSubmit:this.onSubmit,className:"modal"},o.a.createElement("h1",{className:"modalTitle"},"sign in"),o.a.createElement("input",{name:"email",className:"formInput",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),o.a.createElement("input",{name:"password",className:"formInput",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),n&&o.a.createElement("div",{className:"errorMessage"},n.message),o.a.createElement("button",{disabled:r,type:"submit",className:"submitButton"},"sign in")),o.a.createElement(K,null),o.a.createElement(M,null))}}]),t}(n.Component),z=function(){return o.a.createElement("p",null,"have an account? ",o.a.createElement(p.b,{to:"/signin"},"sign in"))},H=Object(D.a)(d.e,y)(V),J=function(){return o.a.createElement("div",null,o.a.createElement(H,null))},X={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,o=t.email,r=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(o,r).then(function(e){return a.props.firebase.user(e.user.uid).set({username:n,email:o})}).then(function(){a.setState(Object(T.a)({},X)),a.props.history.push(f)}).catch(function(e){a.setState({error:e})})},a.onChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.state=Object(T.a)({},X),a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,r=e.passwordTwo,s=e.error,i=n!==r||""===n||n.length<6||""===a||""===t;return o.a.createElement("div",{className:"modalContainer"},o.a.createElement("form",{onSubmit:this.onSubmit,className:"modal"},o.a.createElement("h1",{className:"modalTitle"},"sign up"),o.a.createElement("input",{name:"username",className:"formInput",value:t,onChange:this.onChange,type:"text",placeholder:"username"}),o.a.createElement("input",{name:"email",className:"formInput",value:a,onChange:this.onChange,type:"text",placeholder:"email address"}),o.a.createElement("input",{name:"passwordOne",className:"formInput",value:n,onChange:this.onChange,type:"password",placeholder:"password"}),o.a.createElement("input",{name:"passwordTwo",className:"formInput",value:r,onChange:this.onChange,type:"password",placeholder:"confirm Password"}),s&&o.a.createElement("div",{className:"errorMessage"},s.message),o.a.createElement("button",{disabled:i,type:"submit",className:"submitButton"},"sign up")),o.a.createElement(z,null))}}]),t}(n.Component),K=function(){return o.a.createElement("p",null,"don't have an account? ",o.a.createElement(p.b,{to:"/signup"},"sign up"))},Q=Object(D.a)(d.e,y)(q),$=function(){return o.a.createElement("div",null,o.a.createElement(Q,null))},G=(a(33),{passwordOne:"",passwordTwo:"",error:null}),Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=a.state.passwordOne;a.props.firebase.doPasswordUpdate(t).then(function(){a.setState(Object(T.a)({},G))}).catch(function(e){a.setState({error:e})})},a.onChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.state=Object(T.a)({},G),a.onChange=a.onChange.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,r=t!==a||""===t||t.length<6;return o.a.createElement("form",{onSubmit:this.onSubmit,className:"passwordChangeForm"},o.a.createElement("h3",null,"change your password"),o.a.createElement("input",{name:"passwordOne",value:t,onChange:this.onChange,type:"password",placeholder:"New Password",className:"passwordForgetBox"}),o.a.createElement("input",{name:"passwordTwo",value:a,onChange:this.onChange,type:"password",placeholder:"Confirm New Password",className:"passwordForgetBox"}),o.a.createElement("button",{disabled:r,type:"submit",className:"appButton"},"Reset My Password"),n&&o.a.createElement("p",null,n.message))}}]),t}(n.Component),Z=y(Y),_=function(e){return function(t){var a=function(a){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(h.a)(n,a),Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(a){e(a)||t.props.history.push("/signin")})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return o.a.createElement(t,this.props)}}]),n}(o.a.Component);return Object(D.a)(d.e,y)(a)}},ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={myPosts:[],username:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[];this.props.firebase.loadMyPosts().then(function(e){e.forEach(function(e){var a=e.data();a.id=e.id,t.push(a)})}).then(function(){e.setState({myPosts:t}),e.props.firebase.getCurrentUsername().then(function(t){e.setState({username:t.data().username})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return o.a.createElement("div",{className:"page"},o.a.createElement("h2",null,"my account"),o.a.createElement("h5",null,"logged in as ",this.state.username),o.a.createElement(Z,null),this.state.myPosts.length>0?o.a.createElement(te,{myPosts:this.state.myPosts,authUser:this.props.authUser}):o.a.createElement("p",null,"posts you make will appear here"))}}]),t}(n.Component),te=function(e){return o.a.createElement("div",null,o.a.createElement("h2",null,"My Posts"),e.myPosts.map(function(t){return o.a.createElement(B,Object.assign({},t,{key:t.id,authUser:e.authUser}))}))},ae=y(_(function(e){return null!=e})(ee)),ne=(a(39),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1,users:{}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.users().on("value",function(t){e.setState({users:t.val(),loading:!1})})}},{key:"render",value:function(){return o.a.createElement("div",null,".")}}]),t}(n.Component)),oe=Object(d.e)(y(function(e){return o.a.createElement("button",{type:"button",className:"signOutButton",onClick:function(){e.history.push(f),window.location.reload(),e.firebase.doSignOut()}},"Sign Out")})),re=(a(64),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.setState({searchBarText:e.target.value})},a.onSearch=function(e){e.preventDefault(),a.setState({searchBarText:""}),console.log(a.state.searchBarText)},a.state={searchBarText:"",username:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.getCurrentUsername().then(function(t){e.setState({username:t.data().username})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.state.searchBarText;return o.a.createElement("div",{className:"bottomLeft"},o.a.createElement("div",{className:"footerLink"},o.a.createElement("label",null,o.a.createElement("span",{role:"img","aria-label":"plus emoji"},"\u2795")),o.a.createElement("span",null,o.a.createElement(p.b,{to:"/newpost"},"add a new post"))," ",o.a.createElement("br",null)),o.a.createElement("div",{className:"footerLink"},o.a.createElement("form",{onSubmit:this.onSearch},o.a.createElement("label",{htmlFor:"footer-searchBar"},o.a.createElement("span",{role:"img","aria-label":"search emoji",style:{cursor:"pointer"},onClick:this.onSearch},"\ud83d\udd0d")),o.a.createElement("input",{id:"searchBar",name:"footer-searchBar",type:"text",size:30,autoComplete:"off",value:e,onChange:this.onChange}))),o.a.createElement("div",{className:"footerLink"},o.a.createElement("label",null,o.a.createElement("span",{role:"img","aria-label":"person emoji"},"\ud83d\udc64")),o.a.createElement("span",null,"logged in as ",o.a.createElement(p.b,{to:"/account",style:{textDecoration:"underline"}},this.state.username)),o.a.createElement("br",null)),o.a.createElement("div",{className:"footerLink"},o.a.createElement("label",null,o.a.createElement("span",{role:"img","aria-label":"computer screen emoji"},"\ud83d\udcfa")),o.a.createElement("span",null,o.a.createElement(p.b,{to:"/account"},"see your posts"))),o.a.createElement("span",{className:"footerLink"},o.a.createElement("label",null,o.a.createElement("span",{role:"img","aria-label":"door emoji"},"\ud83d\udeaa")),o.a.createElement(oe,null)))}}]),t}(n.Component)),se=function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"bottomLeft"},o.a.createElement("label",null,o.a.createElement("span",{role:"img","aria-label":""},"\ud83d\udc64")),o.a.createElement("span",null,o.a.createElement(p.b,{to:"/signin"},"log in to make a post")),o.a.createElement("br",null)))},ie=y(function(e){return o.a.createElement("div",null,e.authUser?o.a.createElement(re,{firebase:e.firebase}):o.a.createElement(se,null),o.a.createElement("div",{className:"bottomRight"},o.a.createElement("img",{src:"litorlamelogo.png",alt:"logo",width:"50%",height:"50%"})))}),ce={text:"",uploading:!1,image:null,fileTooLarge:null,filePath:null,submitted:!1},le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault(),a.setState({submitted:!0});var t=a.state,n=t.text,o=t.filePath;o?a.props.firebase.uploadPostImg(o).then(function(e){a.props.firebase.getUploadURL(o).then(function(e){console.log(e),a.makeNewPost(n,e)}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)}):a.makeNewPost(n,"")},a.onChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.state=Object(T.a)({},ce),a.onAddImage=a.onAddImage.bind(Object(m.a)(a)),a.removeImage=a.removeImage.bind(Object(m.a)(a)),a.onSubmit=a.onSubmit.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onAddImage",value:function(e){var t=this;e.preventDefault();var a=e.target.files[0];if(a.size>5e5)this.setState({fileTooLarge:"".concat(a.name," is too large, please pick a smaller file")}),e.target.value=null;else{this.setState({uploading:!0,fileTooLarge:null,filePath:a});var n=new FileReader;n.onload=function(e){t.setState({uploading:!1,image:e.target.result})},n.readAsDataURL(a)}}},{key:"removeImage",value:function(){this.setState({image:null,filePath:null})}},{key:"makeNewPost",value:function(e,t){var a=this;this.props.firebase.newPost(this.props.category,e,t).then(function(e){a.setState(Object(T.a)({},ce)),a.props.sub(a.props.category),a.props.history.push(f)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.text,n=t.uploading,r=t.image,s=t.submitted,i=""===a||a.length>250||s;return o.a.createElement("div",{className:"modalContainer"},o.a.createElement("form",{onSubmit:this.onSubmit,className:"modal"},o.a.createElement("h1",null,"new post"),function(){switch(!0){case n:return o.a.createElement(ue,null);case null!==r:return o.a.createElement(me,{image:r,removeImage:e.removeImage});default:return o.a.createElement("input",{type:"file",id:"imgUpload",onChange:e.onAddImage,className:"submitButton",style:{marginTop:"-5px"}})}}(),this.state.fileTooLarge&&this.state.fileTooLarge,o.a.createElement("textarea",{name:"text",value:a,onChange:this.onChange,placeholder:"250 character limit..."}),o.a.createElement("label",{className:"characterLimit"},250-this.state.text.length," characters left"),o.a.createElement("button",{disabled:i,type:"submit",className:"submitButton"},"post")),o.a.createElement(p.b,{to:f,style:{textDecoration:"none",margin:"5px"}},o.a.createElement("span",{role:"img","aria-label":"back",className:"goBack"},"\u2b05\ufe0f go back")))}}]),t}(n.Component);le.defaultProps={category:"",onSub:function(){}};var ue=function(){return o.a.createElement("div",{className:"spinner fadeIn"},o.a.createElement("img",{src:"spinner.png",alt:"Uploading..."}))},me=function(e){return o.a.createElement("div",{className:"fadeIn imageContainer"},o.a.createElement("div",{onClick:function(){return e.removeImage()},className:"deleteButton"},"X"),o.a.createElement("img",{src:e.image,alt:"",style:{maxWidth:"180px",height:"130px"}}))},he=Object(D.a)(d.e,y)(le),pe=_(function(e){return null!=e})(function(e){return o.a.createElement("div",null,o.a.createElement(he,{category:e.category,sub:e.onSub}))}),de=function(){return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"10px"}},o.a.createElement("h1",{style:{width:"50%",textAlign:"center"}},"Hmmm, we're not sure we know what you're looking for.",o.a.createElement("br",null),o.a.createElement("br",null),"  Head on back to the home page ",o.a.createElement(p.b,{to:f},"here")))},fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={authUser:null,category:"litorlame",posts:[]},a.changeCategory=a.changeCategory.bind(Object(m.a)(a)),a.loadPosts=a.loadPosts.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})}),this.loadPosts(this.state.category)}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"changeCategory",value:function(e){e!==this.state.category&&(this.setState({category:e,posts:[]}),this.loadPosts(e))}},{key:"loadPosts",value:function(e){var t=this,a=[];this.props.firebase.loadPosts(e).then(function(e){e.forEach(function(e){var t=e.data();t.id=e.id,a.push(t)})}).then(function(){t.setState({posts:a})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return o.a.createElement(p.a,null,o.a.createElement("div",null,o.a.createElement(g,{changeCat:this.changeCategory}),o.a.createElement(d.c,null,o.a.createElement(d.a,{exact:!0,path:f,render:function(){return o.a.createElement(I,{posts:e.state.posts,category:e.state.category,authUser:e.state.authUser})}}),o.a.createElement(d.a,{exact:!0,path:"/signup",component:$}),o.a.createElement(d.a,{exact:!0,path:"/signin",component:J}),o.a.createElement(d.a,{exact:!0,path:"/pw-forget",component:F}),o.a.createElement(d.a,{exact:!0,path:"/account",render:function(){return o.a.createElement(ae,{authUser:e.state.authUser})}}),o.a.createElement(d.a,{exact:!0,path:"/admin",component:ne}),o.a.createElement(d.a,{exact:!0,path:"/newpost",render:function(){return o.a.createElement(pe,{onSub:e.loadPosts,category:e.state.category})}}),o.a.createElement(d.a,{component:de}))),o.a.createElement(ie,{authUser:this.state.authUser}))}}]),t}(n.Component),ge=y(fe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(w.Provider,{value:new N},o.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.e06a5447.chunk.js.map